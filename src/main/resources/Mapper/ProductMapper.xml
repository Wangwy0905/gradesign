<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.libei.mapper.ProductMapper">

    <select id="queryByCategoryId" resultType="ProductEntity">
        select id,productName,color,price,repertory,categoryId,categoryId2,description,createTime,
        picture,status from product ORDER by createTime desc where status='1' and categoryId=#{categoryId} limit ${(pageSize-1)*pageNum},${pageNum}
    </select>

    <!--<select id="query" resultType="ProductEntity">-->
        <!--select id,productName,color,price,repertory,categoryId,categoryId2,description,createTime,-->
        <!--picture,status from product ORDER by createTime desc where status='1' and productName like '%'||#{param}||'%' limit ${(pageSize-1)*pageNum},${pageNum}-->
    <!--</select>-->

    <select id="query" resultType="ProductEntity">
        select id,productName,color,price,repertory,categoryId,categoryId2,description,createTime,
        picture,status from product ORDER by createTime desc limit ${(pageSize-1)*pageNum},${pageNum}
    </select>

    <select id="queryLike" resultType="ProductEntity">
        select id,productName,color,price,brand,repertory,categoryId,categoryId2,description,createTime,
        picture,status from product
        <where>
            <if test="productName !=null">
                and productName like '%'||#{productName}||'%'
            </if>
            <if test="brand !=null">
                and brand like '%'||#{brand}||'%'
            </if>
            <if test="description !=null">
                and description like '%'||#{description}||'%'
            </if>
            and status='1'
        </where>
        ORDER by createTime desc limit ${(pageSize-1)*pageNum},${pageNum}
    </select>

</mapper>
